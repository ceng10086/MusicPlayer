# C#本地音乐播放器项目需求文档

本文档详细描述了本地音乐播放器项目的功能、技术和设计需求。

## 1. 核心功能

### 1.1. 音频播放控制
- **播放/暂停/停止**: 提供基本的播放控制。
- **上一首/下一首**: 在播放列表中切换歌曲。
- **播放进度**:
    - 显示当前播放时间和歌曲总时长。
    - 提供可拖动的进度条，允许用户自由跳转到歌曲的任意位置。
- **音量控制**:
    - 提供音量调节滑块。
    - 提供静音按钮。

### 1.2. 音乐信息展示
- **歌曲详情**: 显示当前播放歌曲的标题、艺术家和专辑信息。
- **专辑封面**: 显示当前歌曲的封面图片。

### 1.3. 歌词显示
- **歌词支持**: 支持内嵌歌词和外部 `.srt` 和 `.lrc` 歌词文件。
- **双语歌词**: 支持中英文双语歌词显示，自动识别并分组显示同时间戳的双语内容。
- **歌词加载**: 自动加载与音乐文件同名的 `.srt` 和 `.lrc` 歌词文件。
- **歌词滚动**: 歌词根据歌曲播放进度自动滚动，当前播放行高亮显示。

## 2. 播放列表

- **导入音乐**: 支持从本地文件系统添加一首或多首音乐文件。
- **支持格式**: 支持 MP3, WAV, FLAC, M4A, OGG/OGA, AAC, WMA 等常见音频格式。
- **歌曲列表**: 在界面上以列表形式展示所有已导入的歌曲。
- **搜索与筛选**: 提供功能让用户可以快速在播放列表中查找歌曲。
- **创建与管理**: 用户可以创建自定义的播放列表。
- **数据持久化**: 播放列表将保存在本地。

## 3. 数据存储

- **存储方式**: 使用单个 JSON 文件（例如 `playlist.json`）来存储播放列表数据。
- **文件位置**: 该 JSON 文件必须与程序主可执行文件（`.exe`）位于同一目录下。
- **独立性**: 程序在运行时不应在用户系统其他位置（如 AppData, 我的文档等）创建或读写任何配置文件。

## 4. 用户界面 (UI) 与用户体验 (UX)

### 4.1. 整体风格
- **现代设计**: 采用基于 Fluent Design 的现代化界面。
- **毛玻璃/亚克力效果**: 窗口背景应具有半透明的毛玻璃效果（Acrylic/Mica）。
- **自定义窗口**: 替换原生窗口标题栏，实现与应用内容区风格统一的自定义标题栏，并确保窗口的拖动、最大化、最小化、关闭等核心功能正常。

### 4.2. 特色功能视觉效果
- **唱片机封面**:
    - 专辑封面将被裁剪成圆形显示。
    - 当音乐播放时，圆形封面会模拟唱片机进行匀速旋转。
    - 当音乐暂停时，封面停止旋转。
- **音频可视化**:
    - 根据当前播放音乐的音频数据（频率、振幅）生成动态的视觉效果。
    - 效果应与音乐节奏同步，例如频谱分析器（跳动的柱状图）或其他创意图形。

## 5. 技术选型

- **开发语言与框架**: C# + WPF (Windows Presentation Foundation)
- **UI 框架**: **WPF-UI** (或类似的现代WPF UI库)，用于快速实现 Fluent Design、自定义窗口和毛玻璃效果。
- **音频处理**: **NAudio**，用于处理音频的播放、暂停、停止以及为音频可视化提供FFT（快速傅里叶变换）数据。
- **音频元数据**: **TagLib-Sharp**，用于从音频文件中准确读取封面、标题、艺术家、专辑等元数据。
- **数据序列化**: **System.Text.Json**，用于读写本地的 `playlist.json` 配置文件。
